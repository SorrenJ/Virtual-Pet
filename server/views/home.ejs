<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <style>
        body {
            text-align: center;
        }
        img {
            max-width: 300px;
            height: auto;
            border-radius: 10px;
        }
        h1 {
            font-size: 2em;
            margin: 20px 0;
        }
        .inventory, .user-data {
            display: none; /* Initially hide all tables */
            margin-top: 20px;
        }
        table {
            margin: 0 auto;
            border-collapse: collapse;
            width: 80%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
    <script>
        function toggleTable(tableId) {
            const table = document.getElementById(tableId);
            table.style.display = table.style.display === 'none' || table.style.display === '' ? 'table' : 'none';
        }

        function toggleInventory() {
            const inventoryTable = document.getElementById('inventoryTable');
            const userButtons = document.getElementById('userButtons');
            if (inventoryTable.style.display === 'none' || inventoryTable.style.display === '') {
                inventoryTable.style.display = 'table'; // Show the inventory table
                userButtons.style.display = 'block'; // Show user toggle buttons
            } else {
                inventoryTable.style.display = 'none'; // Hide the inventory table
                userButtons.style.display = 'none'; // Hide user toggle buttons
            }
        }
    </script>
</head>
<body>
    <div class="links">
        <h3>Explore More:</h3>
        <a href="/home">Go home</a>
        <a href="/adopt">Adopt a Pet</a>
        <a href="/shop">Visit the Shop</a>
        <a href="/all_tables">View All Tables</a>
    </div>

    <% if (pet) { %>
    <h1>Welcome <%= pet.user_name %></h1>
        <h2>Meet <%= pet.pet_name %></h2>
        <img src="/db/<%= pet.pet_image %>" alt="<%= pet.pet_name %>">
        <p>Species: <%= pet.species_name %></p>
        <p>Hunger Modifier: <%= pet.hunger_mod %></p>
        <p>Happiness Modifier: <%= pet.happy_mod %></p>
    <% } else { %>
        <p>No pets available at the moment.</p>
    <% } %>
    <button onclick="toggleInventory()">Toggle Inventory Data</button>

    <div class="inventory" id="inventoryTable">
        <h2>Inventory Data</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Money</th>
                    <th>User ID</th>
                    <th>Created At</th>
                    <th>Food Count</th>
                    <th>Toiletries Count</th>
                    <th>Toys Count</th>
                </tr>
            </thead>
            <tbody>
                <% inventory.forEach(item => { %>
                    <tr>
                        <td><%= item.id %></td>
                        <td><%= item.money %></td>
                        <td><%= item.user_id %></td>
                        <td><%= item.created_at %></td>
                        <td><%= foodCount %></td>
                        <td><%= toiletriesCount %></td>
                        <td><%= toysCount %></td> <!-- Use the total count variable -->
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>

    <div id="userButtons" style="display: none;">
        <button onclick="toggleTable('userToysTable')">Toggle User Toys Data</button>
        <button onclick="toggleTable('userToiletriesTable')">Toggle User Toiletries Data</button>
        <button onclick="toggleTable('userFoodTable')">Toggle User Food Data</button>
    </div>

    <div class="user-data" id="userToysTable">
        <h2>User Toys Data</h2>
        <table>
            <thead>
                <tr>
                    <th>Toy Name</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                <% userToys.forEach(item => { %>
                    <tr>
                        <td><%= item.toys_name %></td>
                        <td><%= item.count %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>

    <div class="user-data" id="userToiletriesTable">
        <h2>User Toiletries Data</h2>
        <table>
            <thead>
                <tr>
                    <th>Toiletries Name</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                <% userToiletries.forEach(item => { %>
                    <tr>
                        <td><%= item.toiletries_name %></td>
                        <td><%= item.count %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>

    <div class="user-data" id="userFoodTable">
        <h2>User Food Data</h2>
        <table>
            <thead>
                <tr>
                    <th>Food Name</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                <% userFood.forEach(item => { %>
                    <tr>
                        <td><%= item.food_name %></td>
                        <td><%= item.count %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
</body>
</html>
